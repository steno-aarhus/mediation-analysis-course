# Day 1 group work

::: callout-note
## Objective of this session

In this session, We will get hands on practice using the Framingham
dataset.

-   Conduct mediation analysis using the traditional approaches

-   Conduct mediation analysis using the 'mediation' R package

-   Understanding summary output with binary outcome variable

-   The limitations of the traditional approaches
:::

For the exercises, we will use the Framingham dataset.

First, load the dataset and take a few minutes to explore the variables
in the dataset.

```{r}
library(here)
load(here::here("data/frmghamdata.RData"))

```

## Variables

The dataset includes 'r nrow(frmgham)´ participants and 'r
ncol(frmgham)´.

```{r}
str(frmgham)
```

## Research question

In this exercise, we will investigate the effect of obesity on the risk
of cardiovascular disease (CVD), and how much this relation is mediated
by high blood pressure. **Mediation analysis** could help us answer this
research question.

For the exercise on day 1, we will work with the following variables:

-   socio = socioeconomic status (SES) (binary: 0 = low SES, 1 = high
    SES)
-   sysbp = systolic blood pressure (continous)
-   smoke = smoking status (binary: 0 = no prenatal smoking, 1 =
    prenatal smoking)
-   educ = education ()
-   bmi = body mass index (BMI) (continuous variable in kg/m^2^)
-   obesity (binary: 0=normal, 1=obesity)
-   CVD = (binary: 0=no, 1=yes).

Note: in this example, the outcome of interest is the presence of CVD,
which is a binary variable.

Before we start, let's think about the research question and draw a
directed acyclic graphs. You can either draw by hand or use daggity
(https://www.dagitty.net/).

[Address the following questions]{.underline}:

1.  Estimate the relationship between obesity and blood pressure (fit
    the mediator model).

2.  Estimate the conditional treatment effect of obesity on the
    prevalence of CVD (conditional on SES, or other confounding factors
    based on DAG).

3.  Estimate the effect of blood pressure on the prevalence of CVD,
    conditional on obesity. (conditional on SES, or other confounding
    factors based on DAG).

4.  Calculate the direct effect and indirect effect using the product
    method and difference method, and compare results from the two
    approaches.

5.  Calculate the direct effect and indirect effect using the
    **mediation** package.

6.  Discuss the limitations of the traditional approach.
